关于MRP
==========================
本文翻译自:
https://hirschmann-support.belden.com/en/kb/articles/what-do-i-need-to-know-about-mrp

MRP在2008年由IEC 62439-2标准化.

架构: 
```````````````

MRP环包含环交换机(RS)和1台环管理器(RM).

功能: 
```````````````

环形管理器定期在其两个环形端口上发送测试数据包，并登记在对端环形端口上的接收情况。正常状态下的一个环端口会阻塞正常数据分组。在已定义数量的测试数据包丢失之后，备用环端口将打开用于正常通信，从而修复链路故障或环交换机故障。如果环交换机识别到其一个环端口的链路down，它可以向环管理器发出此事件的信号，在Advanced Mode 模式下，环管理器不需要等到测试分组丢失到足够数量，而是立即激活第二环端口，从而大大加快了恢复速度。 

参数值:
``````````````````````

- MRP 数据包帧类型为 0x88E3 .
- 测试包目的 MAC 地址 01:15:4E:00:00:01
- 控制包目的 MAC 地址 01:15:4E:00:00:02
- 可配置的恢复时间 (max.): 500 ms or 200 ms (较少丢失测试包，因此可能不太稳定)
- 一个有50台交换机的环典型的恢复时间是100 ms.
- Hirschmann 支持最多 200 台交换机在一个环中.


配置规则:
`````````````````````

- MRP环中必须且只能有1个环管理器(RM)
- 环中所有的设备必须支持MRP协议
- 环中所有的设备必须通过环端口来连接
- RM 不应参与冗余环耦合, 即CS 或 CM
- MRP 端口的 VLAN 设置:

  -入口规则: PVID 任意, 入口过滤 ingress filtering = 关闭
  
  -出口规则: 在MRP菜单中配置的环形端口所在 VLAN , 打上标签 ("T")

*请注意: 偏离以上规则可能会导致问题*

