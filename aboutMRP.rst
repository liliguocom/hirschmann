关于MRP你要知道的
==========================
本文翻译自:
https://hirschmann-support.belden.com/en/kb/articles/what-do-i-need-to-know-about-mrp

MRP在2008年由IEC 62439-2标准化.

Media Redundancy Protocol (MRP)介质冗余协议在2008年5月由IEC 62439-2进行了标准化。
它是一个改进的hiper ring。请注意，虽然标准设计的冗余方案支持50台交换机构建一个环网，但是赫斯曼可以支持更多的数量和更快速的恢复。

架构
```````````````

MRP环包含环交换机(RS)和1台环管理器(RM).

功能
```````````````

环管理器周期性的在其两个环端口上发送测试帧，并记录在对端环端口上的接收情况。正常状态下，环管理器的一个环端口会阻塞普通数据包。

在测试帧丢失到定义的数量后，环管理器将打开备用环端口用于普通数据通信，从而修复链路故障或环交换机故障。

在Advanced Mode 模式下，如果环交换机识别到其某一环端口的链路down，它会向环管理器发出此事件的信号，环管理器不再等到测试包丢失到足够数量，而是立即激活备用环端口，从而大大加快了恢复速度。 

参数值
``````````````````````

- MRP 数据包帧类型为 0x88E3 .
- 测试包目的 MAC 地址为 01:15:4E:00:00:01.
- 控制包目的 MAC 地址为 01:15:4E:00:00:02.
- 可配置的恢复时间 (max.): 500 ms or 200 ms (较少丢失测试包，因此可能不太稳定).
- 一个有50台交换机的环,典型的恢复时间是100 ms.
- Hirschmann 支持最多 200 台交换机在一个环中.

配置规则
`````````````````````

- MRP环中必须且只能有1个环管理器(RM).
- 环中所有的设备必须支持MRP协议.
- 环中所有的设备必须通过环端口来连接.
- RM 不应参与冗余环耦合, 即CS 或 CM.
- MRP 端口的 VLAN 设置:

  - 入口规则: PVID 任意, 入口过滤 ingress filtering = 关闭.

  - 出口规则: 在MRP菜单中配置的环端口所在 VLAN , 打上标签 ("T").

*请注意: 偏离以上规则可能会导致问题.*

